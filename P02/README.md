# 01. 암호학 개요
(1) 암호화와 복호화
---

|암호화와 복호화|
|-|
|![이미지](./img/01.png)|

<br>

> 💡
```
  * 용어
    - 암호화 : Encrypt
    - 복호화 : Decrypt
    - 평문 : Plaintext
    - 암호문 : Ciphertext
    - 키 : Key

  * C = Ek(P) : 평문 P를 키 k로 암호화하여(E) 암호문 C를 얻음

  * P = Dk(C) : 암호문 C를 키 k로 복호화하여(D) 평문 P를 얻음
```

<br>

---

<br>

(2) 암호화 시스템
---

<table>
  <tr>
    <th colspan=4>구분</th>
    <th>종류</th>
    <th>비고</th>
  </tr>
  <tr>
    <td rowspan=6>양<br>방<br>향</td>
    <td rowspan=4>대칭키</td>
    <td rowspan=2>Stream<br>방식</td>
    <td>동기식</td>
    <td>OTP, FSR, LFSR, NLFSR, OFB, RC4</td>
    <td>난수열(키스트림) 독립적 생성</td>
  </tr>
  <tr>
    <td>비동기식<br>(자기동기식)</td>
    <td>CFB</td>
    <td>난수열 종속적 생성</td>
  </tr>
  <tr>
    <td rowspan=2>Block<br>방식</td>
    <td>Feistel</td>
    <td>DES, SEED</td>
    <td>암호화 과정 = 복호화 과정</td>
  </tr>
  <tr>
    <td>SPN</td>
    <td>Fijndael, ARIA</td>
    <td>암호화 과정 != 복호화 과정</td>
  </tr>
  <tr>
    <td rowspan=2>비대칭키</td>
    <td colspan=2>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;소인수분해 문제</td>
    <td>RSA</td>
    <td>기밀성, 인증, 부인방지</td>
  </tr>
  <tr>
    <td colspan=2>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;이산대수 문제</td>
    <td>ECC, ElGamal, DH</td>
    <td>기밀성, 인증, 부인방지</td>    
  </tr>
  <tr>
    <td rowspan=3>일<br>방<br>향</td>
    <td rowspan=3>해시함수</td>
    <td>MDC</td>
    <td>해시함수</td>
    <td>MD5, SHA-1, RIPEMD, HAS-160</td>
    <td>무결성</td>    
  </tr>
  <tr>
    <td>MAC</td>
    <td>해시함수 + 대칭키</td>
    <td>축소 MAC, HMAC, CBC-MAC</td>
    <td>무결성 + 인증</td>      
  </tr>
  <tr>
    <td>전자서명</td>
    <td>해시함수 + 비대칭키</td>
    <td>RSA 전자서명, DSS, ECDSA, KCDSA</td>
    <td>무결성 + 인증 + 부인방지</td>         
  </tr>
</table>

<br>

---

<br>

(3) 암호기법의 분류
---
- **치환 암호와 전치 암호**

  - 치환 암호(대치 암호)
 
    - 비트, 문자 또는 문자의 블록을 다른 비트, 문자 또는 블록으로 대체, 교환하는 규칙
   
  - 전치암호
 
    - 비트, 문자 또는 블록이 원래 의미를 감추도록 재배열, 자리를 바꾸는 규칙

- **블록 암호와 스트림 암호**

  - 블록 암호
 
    - 특정 비트 수의 `집합`을 한 번에 처리하는 암호 알고리즘의 총칭
   
  - 스트림 암호
 
    - 한번에 1비트 혹은 1바이트의 데이터 흐름(스트림)을 순차적으로 처리해가는 암호 알고리즘의 총칭
   
- **위치에 따른 암호화 구분**

  - 링크 암호화
 
    - 모든 정보는 암호화되고, 패킷은 라우터나 다른 중간에 있는 장비가 이 패킷을 다음 어디로 보내야 하는지 알아야 하기 때문에 각 홉(hop)에서 해독됨
   
  - 종단간 암호화
 
    - 종단간 암호화에서는 헤더와 트레일러가 암호화되지 않기 때문에 패킷을 각 홉에서 해독하고 암호화할 필요 없음

- **HW 암호와 SW 암호**

  - 하드웨어 암호
 
    - 하드웨어로 실현하기 위해 컴퓨터와 통신기기의 내부버스와 외부 인터페이스에 전용 암호처리용 하드웨어를 설치하여 데이터를 암호화
   
  - 소프트웨어 암호
 
    - 소프트웨어로 실현하기 위해 암호처리용 소프트웨어를 사용하여 데이터를 암호화

<br>

---

<br>

(4) 암호분석의 분류
---

|구분|영어|개념|비고|
|:-:|:-:|-|-|
|암호문<br>단독 공격|COA<br>Ciphertext Only Attack|- 단지 암호문 C만을 갖고 이로부터<br>&nbsp;&nbsp;&nbsp;&nbsp;평문 P나 키 k를 찾아내는 방법<br>- 평문 P의 통계적 성질, 문장의 특성 등을<br>&nbsp;&nbsp;&nbsp;&nbsp;추정하여 해독하는 방법|암호해독자에게는 가장<br>불리한 방법|
|기지<br>평문 공격|KPA<br>Known Plaintext Attack|암호문 C와 평문 P의 관계로부터 키 k나<br>평문 P를 추정하여 해독하는 방법|암호문에 대응하는 일부 평문이<br>사용가능한 상황에서의 공격|
|선택<br>평문 공격|CPA<br>Chosen Plaintext Attack|암호기에 접근할 수 있어 평문 P를 선택하여<br>그 평문 P에 해당하는 암호문 C를 얻어 키 k나<br>평문 P를 추정하여 암호를 해독하는 방법|평문을 선택하면 대응하는<br>암호문을 얻을 수 있는<br>상황에서의 공격|
|선택<br>암호문 공격|CCA<br>Chosen Ciphertext Attack|암호 복호기에 접근할 수 있어 암호문 C에<br>대한 평문 P를 얻어내 암호를 해독하는 방법|암호문을 선택하면 대응하는<br>평문을 얻을 수 있는<br>상황에서의 공격|

<br>

> 💡
```
  * 암호해독(암호분석)
    - 암호방식의 정규 참여자가 아닌 제3자가 암호문으로부터 평문을 찾으려는 시도

  * 암호해독자는 평문과 키를 찾아내는 것을 목표로 함

  * 케르히호프의 원리(Kerckhoff's principle)
    - 암호학에서 암호해독자는 현재 사용되고 있는 암호방식을 알고 있다는 전제하에 암호해독을 시도하는 것으로 간주
```

<br>

---

<br>

(5) 암호기술 평가
---

|평가 종류|설명|비고|
|:-:|-|:-:|
|암호 알고리즘 평가|정보보호제품에 탑재된 암호 알고리즘에 대한 안정성 평가|-|
|암호모듈 평가|알고리즘 자체의 이론적 안정성과는 별도로 암호서비스 기능을 제공하는 암호모듈의 안전성에 대한 평가|CMVP, KCMVP|
|정보보호제품 평가|암호모듈을 탑재한 정보보호제품(예: 침입차단시스템)에 대한 안정성을 평가|-|
|응용시스템 평가|각 제품을 상호 연동하여 구성되는 시스템(예: 항공관제센터의 안전성 평가)에 대한 안전성 평가|-|

<br>

---

<br>

(6) 암호기술 평가
---

|항목|스테가노그래프|워터마크|핑거프린트|
|:-:|:-:|:-:|:-:|
|은닉정보|메시지|판매자 정보|구매자 추적정보|
|관심|은닉메시지 검출|저작권 표시|구매자 추적|
|트래킹|불가|가능|가능|
|불법예방 효과|하|중|상|
|저작권증명 효과|하|중|상|
|공격 강인성|상대적 약함|상대적 강함|상대적 강함|

<br>

> 💡
```
  - 암호 알고리즘에 대한 이론적 안정성 평가 → 검증된 암호모듈에 탑재한 정보보호 제품의 안정성 평가
    → 각각의 제품으로 구성된 응용시스템의 안정성 평가 순으로 이루어짐
```

<br>

> 🚨 보안 용어
```
  * 스테가노그래피
    - 메시지가 전송되고 있다는 사실을 숨기는 기술
  
  * 워터마크
    - 원본의 내용을 왜곡하지 않는 범위 내에서 혹은 사용자가 인식하지 못하도록 저작권 정보를 디지털 콘텐츠에 삽입하는 기술
  
  * 핑거프린트
    - 디지털 콘텐츠를 구매할 때 구매자의 정보를 삽입하여 불법 배포 발견 시 최초의 배포자를 추적할 수 있게 하는 기술
  
  * 디지털 저작권 관리(DRM)
    - 디지털 미디어의 불법 또는 비인가된 사용을 제한하기 위하여 저작권 소유자나 판권 소유자가 이용하는 정보 보호 기술의 일종의 접근제어 기술
```

<br>

---

<br>

# 02. 대칭키 암호
(1) 확산(Diffusion)과 혼돈(Confusion)
---
- 확산(Diffusion)

  - 암호문과 평문 사이의 관계를 숨기는 것
  
  - 암호문에 대한 통계 테스트를 통하여 평문을 찾고자 하는 공격자를 좌절시킴
 
- 혼돈(Confusion)

  - 암호문과 키의 관계를 숨기는 것
 
  - 암호문을 이용하여 키를 찾고자 하는 공격자를 좌절시킴
 
  - 키의 단일 비트가 변하면 암호문의 거의 모든 비트가 변함
  
<br>

---

<br>

(2) 페이스텔(Feistel)과 SPN 구조
---

|구분|설명|종류|
|:-:|-|-|
|Feistel|* 입력을 좌우 블록으로 분할하여 한 블록을 라운드 함수에 적용시킨 후의 출력 값을 다른 블록에 적용하는 과정을 좌우블록에 대해 반복적으로 시행하는 방식<br>* 강도를 결정짓는 요소는 평문 블록의 길이, 키의 길이, 라운드의 수<br>* 복호화 과정은 암호화 과정과 동일<br>* 3라운드 이상이며, 짝수 라운드로 구성|DES, LOKI, CAST, Blowfish, MISTY, RC5, RC6, CAST256, E2, Twofish, Mars|
|SPN|* Substitution Cipher와 Permutation Cipher를 중첩하는 형태로 개발한 암호<br>* S-box의 출력을 P-box로 전치(permutation)하는 과정을 반복하는 방식<br>* 병렬성(parallelism)을 제공|SAFER, SHARK, Square, CRYPTON, Rijndael, SAFER+, Serpent, PRESENT|

<br>

> 💡
```
  * 확산(Diffusion)과 혼돈(Confusion), 페이스텔(Feistel)과 SPN 구조는 현대 대칭키 블록 암호에 중요하게 사용
    - 둘의 차이점을 정확히 알아야 함
```

<br>

---

<br>

(3) 현대 스트림 암호
---

|구분|특징|종류|
|:-:|-|-|
|동기식|키는 평문 or 암호문 독립적|① One time pad ② FSR(Feedback Shift Register) ③ LFSR ④ NLFSR ⑤ OFB 모드| 
|비동기식|키는 평문 or 암호문 종속적|CFB 모드|

<br>

---

<br>

(4) DES의 일반적 구조
---

|DES의 일반적 구조|
|-|
|![이미지](./img/02.png)|

<br>

> 💡
```
  * DES : 1970년대 발표된 이후 가장 널리 사용되었던 대칭키 블록암호

  * 훗날 DES를 세 번 반복하는 DES 가 나옴

  * 최신 블록암호 표준인 AES는 DES를 대체하기 위해 제정된 알고리즘
```

<br>

---

<br>

(5) DES 함수
---

|DES 함수|
|-|
|![이미지](./img/03.png)|

<br>

---

<br>

(6) DES, 3DES, AES
---

|구분|DES|Triple DES|AES|
|:-:|:-:|:-:|:-:|
|평문 블록 크기(bits)|64|64|128|
|암호문 블록 크기(bits)|64|64|128|
|키 크기(bits)|56|112 or 168|128 or 192 or 256|

<br>

> 💡
```
  * DES 함수는 확장 P-박스, 키 XOR, 8개의 S-박스, 단순 P-박스의 4개 부분으로 구성되어 있음
```

<br>

---

<br>

(7) AES 암호의 구조도
---

|AES 암호의 구조도|
|-|
|![이미지](./img/04.png)|

<br>

---

<br>

(8) 대칭키 블록 알고리즘 종류와 특징
---

|구분|개발<br>국가|개발<br>년도|특징|블록<br>크기|키의 길이|라운드수|
|:-:|:-:|:-:|-|:-:|:-:|:-:|
|DES|미국|1972|NIST에서 표준으로 공표(1977년)|64|56|16|
|IDEA|유럽|1990|PGP 채택|64|128|8|
|Rijndael|벨기에|1998|2000년 AES알고리즘으로 선정|128|128, 192, 256|10, 12, 14|
|SEED|한국|1999|한국표준 블록암호 알고리즘|128|128, 256|16, 24|
|CRYPTON|한국|1998|AES 후보 중 하나|128|128, 192, 256|12|
|RC5|미국|1994|알고리즘이 간단, 속도가 빠름|32, 64, 128|0-2040|1-255|
|FEAL|일본|1987|S/W 구현에 적합|64, 128|64|4, 8, 32|
|MISTY|일본|1996|차분/선형공격에 안전성증명구조|64|128|8|
|SKIPJACK|미국|1990|Fortezza 카드에 사용|64|80|32|

<br>

> 💡
```
  * DES 에서는 페이스텔 네트워크 구조 사용

  * Fijndael 에서는 SPN 구조 사용

  * AES 암호화 과정의 각 라운드 구성
    - SubBytes() 연산
    - ShiftRows() 연산
    - MixColumns() 연산
    - AddRoundKey() 연산

  * 국내 대표적인 대칭키 블록 암호 알고리즘
    - SEED
    - ARIA
    - HIGHT
    - LEA
```

<br>

---

<br>

(9) 블록 암호모드 구조
---

|ECB(Electronic CodeBook) 모드|
|-|
|![이미지](./img/05.png)|

<br>

|CBC(Cipher Block Chaining) 모드|
|-|
|![이미지](./img/06.png)|

<br>

|CFB(Cipher-FeedBack) 모드|
|-|
|![이미지](./img/07.png)|

<br>

|OFB(Output-FeedBack) 모드|
|-|
|![이미지](./img/08.png)|

<br>

|CTR(CounTeR) 모드|
|-|
|![이미지](./img/09.png)|

<br>

---

<br>

(10) 블록 암호모드 비교
---

|Name|Full Name|장점|단점|비고|
|:-:|:-:|-|-|-|
|ECB<br>모드|전자 부호표 모드<br>(Electric CodeBook)|* 간단<br>* 고속<br>* 병렬 처리 가능<br>&nbsp;&nbsp;(암호화, 복호화 양쪽)|* 평문 속의 반복이 암호문에 반영됨<br>* 암호문 블록의 삭제나 교체에 의한 평문의 조작 가능<br>* 비트 단위의 에러가 있는 암호문을 복호화하면 대응하는 블록 에러 발생<br>* 재전송 공격 가능|사용해서는 안됨|
|CBC<br>모드|암호 블록 연쇄 모드<br>(Cipher Block Chaining)|* 평문의 반복은 암호문에 반영되지 않음<br>* 병렬 처리 가능(복호                                                                            화만)<br>* 임의의 암호문 블록 복호화 가능|* 전송 도중 암호문 블록 Cj에서 한 비트 오류가 발생하면 평문 블록 Pi에는 대부분의 비트에서 오류가 발생됨<br>* 평문 블록 Pj+1에서는 Cj의 오류비트와 같은 위치에서 한 비트 오류 발생<br>* 암호화에서는 병렬 처리 불가능|Practical Cryptography 권장|
|CFB<br>모드|암호 피드백 모드<br>(Cipher FeedBack)|* 패딩 필요X<br>* 병렬 처리 가능(복호화만)<br>* 임의의 암호문 블록 복호화 가능|* 암호화에서는 병렬 처리 불가능<br>* 전송 도중 암호문 블록 Cj에서 한 비트 오류가 발생하면 평문 블록 Pi에는 Cj의 오류 비트와 같은 위치에서 한 비트 오류 발생됨<br>* Cj의 비트는 시프트 레지스터에 오류가 존재하는 한 다음 평문 블록의 대부분의 비트에 오류 발생(확률적으로 50%)<br>* 재전송 공격 가능||
|OFB<br>모드|출력 피드백 모드<br>(Output FeedBack)|* 패딩 필요X<br>* 암•복호화의 사전 준비 가능<br>* 암•복호화가 같은 구조<br>* 비트 단위의 에러가 있는 암호문을 복호화하면 평문의 대응하는 비트만 에러 발생|* 병렬 처리 불가능<br>* 적극적 공격자가 암호문 블록의 비트를 반전시키면 대응하는 평문 블록의 비트가 반전됨||
|CTR<br>모드|카운터모드<br>(CounTeR)|* 패딩 필요X<br>* 암•복호화의 사전 준비 가능<br>* 암•복호화가 같은 구조<br>* 비트 단위의 에러가 있는 암호문을 복호화하면 평문의 대응하는 비트만 에러 발생<br>* 병렬 처리 가능(암•복호화 양쪽)|* 적극적 공격자가 암호문 블록의 비트를 반전시키면 대응하는 평문 블록의 비트가 반전됨|Practical Cryptography 권장|

<br>

---

<br>


























